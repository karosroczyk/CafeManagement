import './polyfills.server.mjs';
import{a as Pe,b as xe}from"./chunk-GXCC34Q2.mjs";import"./chunk-VOCNMXVE.mjs";import{a as G,b as Q,c as Ie}from"./chunk-3Q3Q6YIP.mjs";import{a as he,b as I,c as k,d as R,e as Se}from"./chunk-67ORKHBL.mjs";import{A as H,B as $,C as K,D as ve,F as be,G as Oe,H as ye,b as z,e as ue,r as fe,s as oe,t as Ce,u as _e,v as Me,w as E,x as L,y as V,z as W}from"./chunk-MA4DLFY5.mjs";import{Bb as q,Cb as pe,Ea as U,Ha as s,Ia as d,Sa as C,T as me,Ta as D,U as j,Xa as f,Y as ie,fa as O,fc as S,ga as y,gb as p,gc as w,hc as de,ib as o,ic as ge,jb as n,kb as l,lb as N,nb as _,ob as g,sb as ce,tb as a,ub as u,vb as M,wb as le,xb as h,yb as P,zb as x}from"./chunk-NLS4OPK7.mjs";import"./chunk-X2SEQXRR.mjs";var v=class r{constructor(t,e){this.menuService=t;this.authService=e}pageResponseMenuResponse={};ngOnInit(){let t=document.querySelectorAll(".nav-link");t.forEach(e=>{window.location.href.endsWith(e.getAttribute("href")||"")&&e.classList.add("active"),e.addEventListener("click",()=>{t.forEach(i=>i.classList.remove("active")),e.classList.add("active")})}),this.getAllMenuItems()}logout(){this.authService.logout()}getAllMenuItems(){this.menuService.getAllMenuItems().subscribe({next:t=>{this.pageResponseMenuResponse=t}})}static \u0275fac=function(e){return new(e||r)(d(I),d(E))};static \u0275cmp=C({type:r,selectors:[["app-menu"]],standalone:!1,decls:31,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","custom-navbar"],[1,"container-fluid"],["href","javascript:void(0)",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/cafe-client",1,"nav-link"],[1,"fas","fa-home-alt"],["routerLink","/cafe-client/menucafe",1,"nav-link"],[1,"fas","fa-newspaper"],["routerLink","/cafe-client/order",1,"nav-link"],[1,"fas","fa-receipt"],["routerLink","/cafe-client/orderHistory",1,"nav-link"],[1,"fas","fa-shopping-cart"],["routerLink","/cafe-client/profile",1,"nav-link"],[1,"fas","fa-user"],[1,"d-flex","gap-2","align-items-center"],["type","submit",1,"btn","btn-link",3,"click"],[1,"fas","fa-door-open",2,"color","black"]],template:function(e,i){e&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),a(3,"Cafe"),n(),o(4,"button",3),l(5,"span",4),n(),o(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),l(10,"i",9),a(11,"\xA0Home "),n()(),o(12,"li",7)(13,"a",10),l(14,"i",11),a(15,"\xA0Cafe Menu "),n()(),o(16,"li",7)(17,"a",12),l(18,"i",13),a(19,"\xA0Create an order "),n()(),o(20,"li",7)(21,"a",14),l(22,"i",15),a(23,"\xA0My orders "),n()(),o(24,"li",7)(25,"a",16),l(26,"i",17),a(27,"\xA0My profile "),n()()(),o(28,"form",18)(29,"button",19),_("click",function(){return i.logout()}),l(30,"i",20),n()()()()())},dependencies:[fe,K,W,H],styles:["li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:#d9baa0;border-radius:5px;text-decoration:underline}li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{color:#959f84;border-radius:5px}li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .custom-navbar[_ngcontent-%COMP%]{background-color:#8a6b52}"]})};var ke="body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif}.menu-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]{text-align:center}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{margin:10px auto;width:50px;height:3px;background-color:#8a6b52}.menu-page[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.menu-page[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:10px}",Y=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-cafe-client-main"]],standalone:!1,decls:9,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[3,"firstButton","secondButton"]],template:function(e,i){e&1&&(o(0,"html",0)(1,"head"),l(2,"meta",1)(3,"meta",2),o(4,"title"),a(5,"Menu"),n()(),o(6,"body"),l(7,"app-menu")(8,"app-main",3),n()()),e&2&&(s(8),p("firstButton","cafe-client/menucafe")("secondButton","cafe-client/order"))},dependencies:[he,v],styles:[ke,ke]})};function je(r,t){r&1&&(o(0,"button"),a(1," Add New Menu Item "),n())}function Ue(r,t){if(r&1&&(o(0,"li")(1,"a",10),a(2),n()()),r&2){let e=t.$implicit;s(),p("href","/cafe-client/menucafe#category-"+e.id,U),s(),u(e.name)}}function De(r,t){if(r&1&&(o(0,"div",13)(1,"h3"),a(2),l(3,"span"),n(),o(4,"p"),a(5),n(),o(6,"span",14),a(7),n()()),r&2){let e=t.$implicit;s(2),M("",e.name," "),s(3),u(e.description),s(2),M("PLN ",e.price,"")}}function qe(r,t){if(r&1&&(o(0,"section",11)(1,"header",4)(2,"h2"),a(3),n(),l(4,"div",5),n(),f(5,De,8,3,"div",12),n()),r&2){let e=t.$implicit,i=g();p("id","category-"+e.id),s(3),u(e.name),s(2),p("ngForOf",i.menuItemsByCategory[e.name]==null?null:i.menuItemsByCategory[e.name].data)}}var Re="body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif}.menu-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]{text-align:center}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{margin:10px auto;width:50px;height:3px;background-color:#8a6b52}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]{margin:20px 0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;gap:20px;padding:0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.1rem;font-weight:700;transition:color .3s ease}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#8a6b52}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]{margin:20px 0}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{margin-bottom:20px;border-bottom:1px dotted #000000;padding-bottom:10px}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:400}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;color:#8a6b52;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.menu-page[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:10px}",J=class r{constructor(t,e,i){this.menuService=t;this.categoryService=e;this.authService=i}pageResponseMenuResponse={};pageResponseCategoryResponse={};menuItemsByCategory={};ngOnInit(){this.getAllCategories()}getAllCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{t&&t.data?(this.pageResponseCategoryResponse=t,t.data.forEach(e=>{this.getMenuItemsByCategoryName(e.name),console.log(t.data)})):console.error("Category response data is undefined or empty.")},error:t=>{console.error("Error fetching categories:",t)}})}getMenuItemsByCategoryName(t){this.menuService.getMenuItemsByCategoryName(t).subscribe({next:e=>{this.menuItemsByCategory[t]=e;let i=this.menuItemsByCategory[t].data.map(m=>m.item_id),c=this.menuItemsByCategory[t].data.map(m=>m.quantity||0)},error:e=>{console.error("Error fetching menu items:",e)}})}static \u0275fac=function(e){return new(e||r)(d(I),d(G),d(E))};static \u0275cmp=C({type:r,selectors:[["app-menu-cafe"]],standalone:!1,decls:18,vars:3,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"menu-page"],[1,"menu-header"],[1,"menu-divider"],[4,"ngIf"],[1,"menu-nav"],[4,"ngFor","ngForOf"],["class","menu-section",3,"id",4,"ngFor","ngForOf"],[3,"href"],[1,"menu-section",3,"id"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],[1,"price"]],template:function(e,i){e&1&&(o(0,"html",0)(1,"head"),l(2,"meta",1)(3,"meta",2),o(4,"title"),a(5,"Menu"),n()(),o(6,"body"),l(7,"app-menu"),o(8,"div",3)(9,"header",4)(10,"h1"),a(11,"Menu"),n(),l(12,"div",5),n(),f(13,je,2,0,"button",6),o(14,"nav",7)(15,"ul"),f(16,Ue,3,2,"li",8),n()(),f(17,qe,6,3,"section",9),n()()()),e&2&&(s(13),p("ngIf",i.authService.hasRole("ADMIN")),s(3),p("ngForOf",i.pageResponseCategoryResponse==null?null:i.pageResponseCategoryResponse.data),s(),p("ngForOf",i.pageResponseCategoryResponse.data))},dependencies:[S,w,v],styles:[Re,Re]})};var T=class r{constructor(t){this.data=t}static \u0275fac=function(e){return new(e||r)(d(Pe))};static \u0275cmp=C({type:r,selectors:[["app-order-dialog"]],standalone:!1,decls:8,vars:2,consts:[[1,"dialog-content"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",1,"dialog-actions"],["place-order-btn","","mat-dialog-close",""]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1",1),a(2),n(),o(3,"div",2),a(4),n(),o(5,"div",3)(6,"button",4),a(7,"OK"),n()()()),e&2&&(s(2),u(i.data.title),s(2),u(i.data.message))},styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;width:100%;height:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}button[place-order-btn][_ngcontent-%COMP%]{padding:10px 20px;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1.1rem}button.add-to-basket-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};var X=class r extends _e{baseUrl=this.rootUrl+"/api/inventory";constructor(t,e){super(t,e)}getAllInventoryItems(t=0,e=20,i=["menuItemId"],c=["asc"]){let m=new z().set("page",t).set("size",e).set("sortBy",i.join(",")).set("direction",c.join(","));return this.http.get(this.rootUrl+"/api/inventory",{params:m})}getInventoryItemById(t){return this.http.get(`${this.baseUrl}/${t}`)}getInventoryItemAvailability(t,e){let i=new z().set("menuItemIds",t.join(",")).set("quantitiesOfMenuItems",e.join(","));return this.http.get(`${this.baseUrl}/availability`,{params:i})}createInventoryItem(t){return this.http.post(this.baseUrl,t)}updateInventoryItem(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}reduceStock(t,e){let i=new z().set("menuItemIds",t.join(",")).set("quantitiesOfMenuItems",e.join(","));return this.http.put(`${this.baseUrl}/reduce`,null,{params:i})}addStock(t,e){return this.http.put(`${this.baseUrl}/${t}/add`,e)}deleteInventoryItem(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||r)(ie(Ce),ie(ue))};static \u0275prov=me({token:r,factory:r.\u0275fac,providedIn:"root"})};var se=r=>({"background-color":r});function Ve(r,t){if(r&1&&(o(0,"li")(1,"a",10),a(2),n()()),r&2){let e=t.$implicit;s(),p("href","/cafe-client/order#category-"+e.id,U),s(),u(e.name)}}function We(r,t){if(r&1){let e=N();o(0,"div",13)(1,"h3"),a(2),n(),o(3,"p"),a(4),n(),o(5,"div",14)(6,"span",15),a(7),n(),o(8,"div",16)(9,"button",17),_("click",function(){let c=O(e).$implicit,m=g(2);return y(m.decrementQuantity(c))}),a(10,"-"),n(),o(11,"input",18),x("ngModelChange",function(c){let m=O(e).$implicit;return P(m.quantity,c)||(m.quantity=c),y(c)}),n(),o(12,"button",17),_("click",function(){let c=O(e).$implicit,m=g(2);return y(m.incrementQuantity(c))}),a(13,"+"),n(),o(14,"button",17),_("click",function(){let c=O(e).$implicit,m=g(2);return y(m.addToBasket(c))}),a(15," Add to Basket "),n()()()()}if(r&2){let e=t.$implicit;s(2),u(e.name),s(2),u(e.description),s(3),M("PLN ",e.price,""),s(2),p("disabled",!e.available)("ngStyle",q(11,se,e.available?"#8a6b52":"#ccc")),s(2),h("ngModel",e.quantity),p("value",e.quantity||0),s(),p("disabled",!e.available)("ngStyle",q(13,se,e.available?"#8a6b52":"#ccc")),s(2),p("disabled",!e.available)("ngStyle",q(15,se,e.available?"#8a6b52":"#ccc"))}}function He(r,t){if(r&1&&(o(0,"section",11)(1,"header",1)(2,"h2"),a(3),n(),l(4,"div",2),n(),f(5,We,16,17,"div",12),n()),r&2){let e=t.$implicit,i=g();p("id","category-"+e.id),s(3),u(e.name),s(2),p("ngForOf",i.menuItemsByCategory[e.name]==null?null:i.menuItemsByCategory[e.name].data)}}function $e(r,t){if(r&1){let e=N();o(0,"div",19)(1,"h3"),a(2),n(),o(3,"button",20),_("click",function(){let c=O(e).index,m=g();return y(m.removeFromBasket(c))}),a(4,"Remove from Basket"),n()()}if(r&2){let e=t.$implicit;s(2),le("",e.name,": ",e.quantity,"")}}var Z=class r{constructor(t,e,i,c,m,F){this.menuService=t;this.categoryService=e;this.inventoryService=i;this.userService=c;this.orderService=m;this.dialog=F}pageResponseMenuResponse={};pageResponseCategoryResponse={};pageResponseOrderResponse={};menuItemsByCategory={};basket=[];ngOnInit(){this.getAllCategories()}getAllCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{t&&t.data?(this.pageResponseCategoryResponse=t,t.data.forEach(e=>{this.getMenuItemsByCategoryName(e.name)})):console.error("Category response data is undefined or empty.")},error:t=>{console.error("Error fetching categories:",t)}})}getMenuItemsByCategoryName(t){this.menuService.getMenuItemsByCategoryName(t).subscribe({next:e=>{this.menuItemsByCategory[t]=e;let i=this.menuItemsByCategory[t].data.map(m=>m.item_id),c=this.menuItemsByCategory[t].data.map(m=>m.quantity||0);this.updateMenuItemAvailability(t,i,c)},error:e=>{console.error("Error fetching menu items:",e)}})}updateMenuItemAvailability(t,e,i){this.inventoryService.getInventoryItemAvailability(e,i).subscribe(c=>{this.menuItemsByCategory[t].data.forEach((m,F)=>{m.available=c[F],m.quantity=0}),console.log("Inventory availability updated successfully")},c=>{console.error("Error checking inventory availability:",c)})}addToBasket(t){if(t.quantity===0){this.dialog.open(T,{data:{title:"Cannot Add to Basket",message:"Please select a amount greater than 0 before adding to the basket."}});return}this.basket.push(t),this.inventoryService.getInventoryItemAvailability([t.item_id],[1+t.quantity]).subscribe(e=>{e[0]||(t.available=!1)},e=>{console.error("Error checking inventory availability:",e)})}removeFromBasket(t){this.basket[t].available=!0,this.basket[t].quantity=0,this.basket.splice(t,1)}incrementQuantity(t){t.quantity===void 0&&(t.quantity=0),this.inventoryService.getInventoryItemAvailability([t.item_id],[t.quantity+1]).subscribe(e=>{e[0]?t.quantity++:t.available=!0},e=>{console.error("Error checking inventory availability:",e)})}decrementQuantity(t){t.quantity>0&&t.quantity--}placeOrder(){let t=this.basket.map(i=>i.item_id||0),e=this.basket.map(i=>i.quantity||0);this.userService.getCurrentUser().subscribe({next:i=>{if(i&&i.id!==void 0){let c=i.id;this.orderService.placeOrder(c,t,e).subscribe(()=>{this.dialog.open(T,{data:{title:"Order Placed",message:"Your order has been placed successfully!"}})},m=>{let F=m?.error?.message||"An unexpected error occurred.";this.dialog.open(T,{data:{title:"Order Failed",message:F}})})}else console.error("User not found")},error:i=>{console.error("Error fetching user",i)}})}static \u0275fac=function(e){return new(e||r)(d(I),d(G),d(X),d(k),d(Q),d(xe))};static \u0275cmp=C({type:r,selectors:[["app-menu-cafe"]],standalone:!1,decls:20,vars:3,consts:[[1,"menu-page"],[1,"menu-header"],[1,"menu-divider"],[1,"menu-nav"],[4,"ngFor","ngForOf"],["class","menu-section",3,"id",4,"ngFor","ngForOf"],[1,"basket"],["class","basket-item",4,"ngFor","ngForOf"],[1,"place-order"],[1,"place-order-btn",3,"click"],[3,"href"],[1,"menu-section",3,"id"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],[1,"menu-item-details"],[1,"price"],[1,"actions"],[1,"add-to-basket-btn",3,"click","disabled","ngStyle"],["type","number","min","0","placeholder","0",1,"quantity-input",3,"ngModelChange","ngModel","value"],[1,"basket-item"],[3,"click"]],template:function(e,i){e&1&&(o(0,"body"),l(1,"app-menu"),o(2,"div",0)(3,"header",1)(4,"h1"),a(5,"Menu"),n(),l(6,"div",2),n(),o(7,"nav",3)(8,"ul"),f(9,Ve,3,2,"li",4),n()(),f(10,He,6,3,"section",5),o(11,"section",6)(12,"header",1)(13,"h2"),a(14,"Basket"),n(),l(15,"div",2),n(),f(16,$e,5,2,"div",7),n(),o(17,"div",8)(18,"button",9),_("click",function(){return i.placeOrder()}),a(19,"Place Order"),n()()()()),e&2&&(s(9),p("ngForOf",i.pageResponseCategoryResponse==null?null:i.pageResponseCategoryResponse.data),s(),p("ngForOf",i.pageResponseCategoryResponse.data),s(6),p("ngForOf",i.basket))},dependencies:[S,de,L,ve,V,be,$,v],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif}.menu-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]{text-align:center}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{margin:10px auto;width:50px;height:3px;background-color:#8a6b52}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]{margin:20px 0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;gap:20px;padding:0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.1rem;font-weight:700;transition:color .3s ease}.menu-page[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#8a6b52}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]{margin:20px 0}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{margin-bottom:20px;border-bottom:1px dotted #000000;padding-bottom:10px}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-item-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.25rem;color:#8a6b52;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .add-to-basket-btn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.menu-page[_ngcontent-%COMP%]   .menu-section[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:5px;width:70px;text-align:center}.basket[_ngcontent-%COMP%]{margin-top:40px}.basket[_ngcontent-%COMP%]   .basket-item[_ngcontent-%COMP%]{border-bottom:1px dotted #000000;padding:10px 0;display:flex;justify-content:space-between}.basket[_ngcontent-%COMP%]   .basket-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.basket[_ngcontent-%COMP%]   .basket-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;padding:5px 10px;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer}.place-order[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.place-order-btn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1.1rem}"]})};function Ke(r,t){if(r&1&&(o(0,"p")(1,"strong"),a(2),n(),a(3),n()),r&2){let e=g().$implicit,i=g(2);s(2),M("",i.menuItemNameMap[e.menuItemId].name,": "),s(),M(" ",e.quantity," ")}}function Ge(r,t){r&1&&(o(0,"p"),a(1,"Loading..."),n())}function Qe(r,t){if(r&1&&(o(0,"li"),f(1,Ke,4,2,"p",11)(2,Ge,2,0,"ng-template",null,0,pe),n()),r&2){let e=t.$implicit,i=ce(3),c=g(2);s(),p("ngIf",c.menuItemNameMap[e.menuItemId])("ngIfElse",i)}}function Ye(r,t){if(r&1){let e=N();o(0,"tr")(1,"td"),a(2),n(),o(3,"td"),a(4),n(),o(5,"td"),a(6),n(),o(7,"td"),a(8),n(),o(9,"td"),a(10),n(),o(11,"td")(12,"details")(13,"summary",9),_("click",function(){let c=O(e).$implicit,m=g();return y(m.getOrderMenuItemIdKeyByOrderId(c.id))}),a(14,"View Details"),n(),o(15,"div",10)(16,"p")(17,"strong"),a(18,"Items:"),n()(),o(19,"ul"),f(20,Qe,4,2,"li",8),n()()()()()}if(r&2){let e=t.$implicit,i=t.index,c=g();s(2),u(i+1),s(2),M("",e.total_price," PLN"),s(2),u(e.status),s(2),u(e.createdAt),s(2),u(e.updatedAt),s(10),p("ngForOf",c.orderMenuItemsMap[e.id])}}var Te="body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif}.menu-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]{text-align:center}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.menu-page[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{margin:10px auto;width:50px;height:3px;background-color:#8a6b52}.order-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 4px 10px #0000001a;border-radius:8px;overflow:hidden}.order-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#8a6b52;color:#fff}.order-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px;text-align:left;font-size:1.1rem}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f4f4f4}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;font-size:1rem}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status.completed[_ngcontent-%COMP%]{color:green}.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{color:orange}",ee=class r{constructor(t,e,i,c){this.menuService=t;this.orderService=e;this.userService=i;this.orderMenuItemService=c}pageResponseInventoryResponse={};pageResponseOrderResponse=[];orderMenuItemsMap={};menuItemNameMap={};ngOnInit(){this.fetchOrders()}fetchOrders(){this.userService.getCurrentUser().subscribe({next:t=>{if(t&&t.id!==void 0){let e=t.id;this.orderService.getOrdersByCustomerId(e).subscribe({next:i=>{this.pageResponseOrderResponse=i}})}else console.error("User not found")},error:t=>{console.error("Error fetching user",t)}})}getOrderMenuItemIdKeyByOrderId(t){this.orderMenuItemService.getOrderMenuItemIdKeyByOrderId(t).subscribe({next:e=>{this.orderMenuItemsMap[t]=e.map(i=>i.orderMenuItemIdKey),this.orderMenuItemsMap[t].forEach(i=>{this.getMenuItemById(i.menuItemId)})}})}getMenuItemById(t){this.menuItemNameMap[t]||this.menuService.getMenuItemById(t).subscribe({next:e=>{this.menuItemNameMap[t]=e}})}static \u0275fac=function(e){return new(e||r)(d(I),d(Q),d(k),d(Ie))};static \u0275cmp=C({type:r,selectors:[["app-order-history"]],standalone:!1,decls:30,vars:1,consts:[["loading",""],["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"menu-page"],[1,"menu-header"],[1,"menu-divider"],[1,"order-table"],[4,"ngFor","ngForOf"],[3,"click"],[1,"order-details"],[4,"ngIf","ngIfElse"]],template:function(e,i){e&1&&(o(0,"html",1)(1,"head"),l(2,"meta",2)(3,"meta",3),o(4,"title"),a(5,"Orders History"),n()(),o(6,"body"),l(7,"app-menu"),o(8,"div",4)(9,"header",5)(10,"h1"),a(11,"Your Orders"),n(),l(12,"div",6),n(),o(13,"table",7)(14,"thead")(15,"tr")(16,"th"),a(17,"Order ID"),n(),o(18,"th"),a(19,"Total Price"),n(),o(20,"th"),a(21,"Status"),n(),o(22,"th"),a(23,"Created"),n(),o(24,"th"),a(25,"Updated"),n(),o(26,"th"),a(27,"Details"),n()()(),o(28,"tbody"),f(29,Ye,21,6,"tr",8),n()()()()()),e&2&&(s(29),p("ngForOf",i.pageResponseOrderResponse))},dependencies:[S,w,v],styles:[Te,Te]})};function Je(r,t){if(r&1&&(o(0,"div",18),a(1),n()),r&2){let e=g();s(),M(" ",e.successMessage," ")}}function Xe(r,t){if(r&1&&(o(0,"div",19),a(1),n()),r&2){let e=g();s(),M(" ",e.failureMessage," ")}}var Ne="body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif}.profile-page[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.profile-page[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{text-align:center}.profile-page[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.profile-page[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.profile-page[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .profile-divider[_ngcontent-%COMP%]{margin:10px auto;width:50px;height:3px;background-color:#8a6b52}.profile-page[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:20px}.profile-page[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.profile-page[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.profile-page[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;font-size:1rem;border:1px solid #ccc;border-radius:5px}.profile-page[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#8a6b52;outline:none}.profile-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1.2rem;font-weight:700;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background .3s ease}.profile-page[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{width:100%;margin-top:20px;padding:10px;font-size:1.2rem;font-weight:700;background-color:red;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background .3s ease}.role-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.role-dots[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-top:.5rem}.role-dots[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;text-align:center;cursor:pointer}input[type=radio][_ngcontent-%COMP%]{display:none}.dot[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;background-color:#d3d3d3;border:2px solid #ccc;margin:0 auto;display:block;box-sizing:border-box;transition:background-color .2s,border-color .2s}.dot.selected[_ngcontent-%COMP%]{background-color:#8a6b52;border-color:#8a6b52}.role-name[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.75rem;display:block}.update[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:20px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1.2rem;font-weight:700;border:none;border-radius:5px;cursor:pointer;transition:background .3s ease}.button-group[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%], .button-group[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#8a6b52;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1.1rem}",te=class r{constructor(t,e,i){this.userService=t;this.authService=e;this.tokenService=i}user={};pageResponseUserResponse={};successMessage="";failureMessage="";ngOnInit(){let t=this.tokenService.getEmail();if(!t){console.error("No email found in token");return}this.userService.getUserByEmail(t).subscribe({next:e=>{this.user=e},error:e=>{console.error("Failed to load user",e)}})}updateProfile(){let t=this.user.id;if(!t){console.error("User ID not found. Cannot update account.");return}let e={id:this.user.id,first_name:this.user.first_name,last_name:this.user.last_name,email:this.user.email,password:this.user.password,dateOfBirth:this.user.dateOfBirth,roles:this.user.roles};this.userService.updateUser(t,e).subscribe({next:()=>{this.successMessage="Profile updated successfully.",setTimeout(()=>this.successMessage="",5e3)},error:i=>{this.failureMessage="Failed to update account.",setTimeout(()=>this.failureMessage="",5e3)}})}deleteAccount(){let t=this.user.id;if(!t){console.error("User ID not found. Cannot delete account.");return}this.userService.deleteUser(t).subscribe({next:()=>{this.successMessage="Account deleted successfully.",setTimeout(()=>this.successMessage="",5e3),this.authService.logout()},error:e=>{this.failureMessage="Failed to delete account.",setTimeout(()=>this.failureMessage="",5e3)}})}static \u0275fac=function(e){return new(e||r)(d(k),d(E),d(Me))};static \u0275cmp=C({type:r,selectors:[["app-profile"]],standalone:!1,decls:41,vars:7,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"profile-page"],[1,"profile-header"],[1,"profile-divider"],[1,"profile-form",3,"ngSubmit"],[1,"form-group"],["type","text","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",3,"ngModelChange","ngModel"],["type","date","name","dateOfBirth","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"button-group"],[1,"update-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"alert","alert-success"],[1,"alert","alert-danger"]],template:function(e,i){e&1&&(o(0,"html",0)(1,"head"),l(2,"meta",1)(3,"meta",2),o(4,"title"),a(5,"Menu"),n()(),o(6,"body"),l(7,"app-menu"),o(8,"div",3)(9,"header",4)(10,"h1"),a(11,"Your Profile"),n(),l(12,"div",5),n(),o(13,"form",6),_("ngSubmit",function(){return i.updateProfile()}),o(14,"div",7)(15,"label"),a(16,"First Name"),n(),o(17,"input",8),x("ngModelChange",function(m){return P(i.user.first_name,m)||(i.user.first_name=m),m}),n()(),o(18,"div",7)(19,"label"),a(20,"Last Name"),n(),o(21,"input",9),x("ngModelChange",function(m){return P(i.user.last_name,m)||(i.user.last_name=m),m}),n()(),o(22,"div",7)(23,"label"),a(24,"Date of Birth"),n(),o(25,"input",10),x("ngModelChange",function(m){return P(i.user.dateOfBirth,m)||(i.user.dateOfBirth=m),m}),n()(),o(26,"div",7)(27,"label"),a(28,"Email"),n(),o(29,"input",11),x("ngModelChange",function(m){return P(i.user.email,m)||(i.user.email=m),m}),n()(),o(30,"div",7)(31,"label"),a(32,"Password"),n(),o(33,"input",12),x("ngModelChange",function(m){return P(i.user.password,m)||(i.user.password=m),m}),n()()(),f(34,Je,2,1,"div",13)(35,Xe,2,1,"div",14),o(36,"div",15)(37,"button",16),_("click",function(){return i.updateProfile()}),a(38,"Update Profile"),n(),o(39,"button",17),_("click",function(){return i.deleteAccount()}),a(40,"Delete Account"),n()()()()()),e&2&&(s(17),h("ngModel",i.user.first_name),s(4),h("ngModel",i.user.last_name),s(4),h("ngModel",i.user.dateOfBirth),s(4),h("ngModel",i.user.email),s(4),h("ngModel",i.user.password),s(),p("ngIf",i.successMessage),s(),p("ngIf",i.failureMessage))},dependencies:[w,K,L,V,W,Oe,$,H,v],styles:[Ne,Ne]})};var Ze=[{path:"",component:Y,canActivate:[R],data:{role:["CLIENT"]}},{path:"menucafe",component:J,canActivate:[R],data:{role:["CLIENT"]}},{path:"order",component:Z,canActivate:[R],data:{role:["CLIENT"]}},{path:"orderHistory",component:ee,canActivate:[R],data:{role:["CLIENT"]}},{path:"profile",component:te,canActivate:[R],data:{role:["CLIENT"]}}],ne=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=D({type:r});static \u0275inj=j({imports:[oe.forChild(Ze),oe]})};var Be=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=D({type:r});static \u0275inj=j({imports:[ge,ne,ye,Se]})};export{Be as CafeClientModule};
